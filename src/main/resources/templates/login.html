<!DOCTYPE html>
<html lang="zh-CN" class="nivo-lightbox-notouch" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>登录 | 小虚无的下午茶</title>
    <link rel="stylesheet" th:href="@{/static/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/static/css/font-awesome.min.css}">
    <link rel="stylesheet" th:href="@{/static/css/slicknav.css}">
    <link rel="stylesheet" th:href="@{/static/css/nivo-lightbox.css}">
    <link rel="stylesheet" th:href="@{/static/css/animate.css}">
    <link rel="stylesheet" th:href="@{/static/css/main.css}">
    <link rel="stylesheet" th:href="@{/static/css/responsive.css}">

</head>
<body>

<!-- 头部开始 -->
<header id="header-wrap">
    <!-- 导航栏开始 -->
    <nav class="navbar navbar-expand-lg fixed-top scrolling-navbar indigo top-nav-collapse">
        <div class="container">
            <div class="navbar-header">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-navbar"
                        aria-controls="main-navbar" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                    <span class="icon-menu"></span>
                    <span class="icon-menu"></span>
                    <span class="icon-menu"></span>
                </button>
                <a href="https://www.chairc.cn" class="navbar-brand"><img
                        src="./Home_files/logo.png" alt=""></a>
            </div>
            <div class="collapse navbar-collapse" id="main-navbar">
                <ul class="onepage-nev navbar-nav mr-auto w-100 justify-content-end clearfix">
                    <li class="nav-item">
                        <a class="nav-link" href="/">
                            主页
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/#about">
                            关于
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/article">
                            归档
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/message">
                            留言
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="">
                            图片
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="">
                            娱乐
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/user/login">
                            个人
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <!-- 手机导航栏开始 -->
        <ul class="onepage-nev mobile-menu">
            <li>
                <a href="/">主页</a>
            </li>
            <li class="">
                <a href="/#about">关于</a>
            </li>
            <li class="">
                <a href="/article">归档</a>
            </li>
            <li class="">
                <a href="/message">留言</a>
            </li>
            <li class="">
                <a href="">图片</a>
            </li>
            <li class="">
                <a href="">娱乐</a>
            </li>
            <li class="">
                <a href="/user/login">个人</a>
            </li>
        </ul>
        <!-- 手机导航栏结束 -->
    </nav>
    <!-- 导航栏结束 -->

</header>
<!-- 头部结束 -->

<div class="login-container">
    <div class="login-form">
        <h2>登 录</h2>
        <input type="text" id="username" name="username" placeholder="用户名"
               required="required" onkeyup="value=value.replace(/[\W]/g,'')"/>
        <input type="password" id="password" name="password" placeholder="密码"
               required="required"/>
        <button onclick="login()">登录</button>
        <a class="login-registered" href="/registered">注册</a>
        <a class="login-registered" href="/qqlogin/loginByQQ">qq快速登录</a>
    </div>
</div>

<div class="message-box-warp">
    <div id="message-box" class="message-box">
        <p id="message-box-text"></p>
    </div>
</div>

<script>
    function login() {
        var username = $("#username").val().trim();
        var password = $("#password").val().trim();

        if (username !== "" && password !== "") {
            $.ajax({
                url: "/loginUserByAjax",
                dataType: "JSON",
                data: {
                    "username": username, "password": password
                },
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    if (data.result === "1") {
                        $("#message-box-text").html(data.msg);
                        $("#message-box").css("color", "#ffffff");
                        $("#message-box").css("background", "#1a95ff");
                        setTimeout(function () {
                            window.location.href = "/";
                        }, 2000)
                    } else if (data.result === "0") {
                        //登录失败，用户名或密码错误
                        $("#message-box-text").html(data.msg);
                        $("#message-box").css("color", "#a94442");
                        $("#message-box").css("background", "#f2dede");
                    }
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(XMLHttpRequest.status);
                    alert(XMLHttpRequest.readyState);
                    alert(textStatus);
                    alert(errorThrown)
                }
            })
        } else {
            $("#message-box-text").html("登录失败，用户名或密码为空");
            $("#message-box").css("color", "#a94442");
            $("#message-box").css("background", "#f2dede");
        }
        setTimeout(function () {
            $('#message-box').slideUp(300);
        }, 1000);
        if ($("#message-box").is(":hidden")) {
            $('#message-box').slideDown(300);
        } else {
            $('#message-box').slideUp(300);
        }

    }
</script>

<script type="text/javascript" th:src="@{/static/js/jquery-min.js}"></script>
<script type="text/javascript" th:src="@{/static/js/popper.min.js}"></script>
<script type="text/javascript" th:src="@{/static/js/bootstrap.min.js}"></script>
<script type="text/javascript" th:src="@{/static/js/jquery.mixitup.js}"></script>
<script type="text/javascript" th:src="@{/static/js/jquery.counterup.min.js}"></script>
<script type="text/javascript" th:src="@{/static/js/waypoints.min.js}"></script>
<script type="text/javascript" th:src="@{/static/js/wow.js}"></script>
<script type="text/javascript" th:src="@{/static/js/jquery.nav.js}"></script>
<script type="text/javascript" th:src="@{/static/js/jquery.easing.min.js}"></script>
<script type="text/javascript" th:src="@{/static/js/nivo-lightbox.js}"></script>
<script type="text/javascript" th:src="@{/static/js/jquery.slicknav.js}"></script>
<script type="text/javascript" th:src="@{/static/js/main.js}"></script>

</body>
</html>